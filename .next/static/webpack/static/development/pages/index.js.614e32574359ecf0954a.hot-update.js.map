{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.614e32574359ecf0954a.hot-update.js","sources":["webpack:///./components/Issues.js"],"sourcesContent":["import { Component } from 'react';\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\r\n\r\nimport Issue from './Issue';\r\nimport Sidebar from './Sidebar';\r\n\r\nimport WrapperStyles from './../styles/WrapperStyles';\r\n\r\n// a little function to help us with reordering the result\r\nconst reorder = (list, startIndex, endIndex) => {\r\n  const result = Array.from(list);\r\n  const [removed] = result.splice(startIndex, 1);\r\n  result.splice(endIndex, 0, removed);\r\n\r\n  return result;\r\n};\r\n\r\nconst getItemStyle = (isDragging, draggableStyle) => ({\r\n  userSelect: 'none',\r\n  background: isDragging ? '#5582fa' : '#eee',\r\n  borderRadius: '0.25rem',\r\n  border: '1px solid #ccc',\r\n  margin: '1rem',\r\n  padding: '1rem',\r\n  ...draggableStyle\r\n});\r\n\r\nexport default class Issues extends Component {\r\n  state = {\r\n    isLoaded: false,\r\n    items: [],\r\n    username: '',\r\n    token: ''\r\n  };\r\n\r\n  onDragEnd = result => {\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n\r\n    const items = reorder(this.state.items, result.source.index, result.destination.index);\r\n\r\n    this.setState({\r\n      items\r\n    });\r\n  };\r\n\r\n  getIssues = () => {\r\n    fetch(`https://api.github.com/search/issues?q=${this.state.username}`, {\r\n      headers: {\r\n        Authorization: `token ${this.state.token}`\r\n      }\r\n    })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        console.log(data.items);\r\n        this.setState({ isLoaded: true, items: data.items });\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n        this.setState({ isLoaded: false, error });\r\n      });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getIssues();\r\n  }\r\n\r\n  componentWillReceiveProps(prevProps) {\r\n    if (prevProps === undefined) {\r\n      return false;\r\n    }\r\n    this.setState({\r\n      isLoaded: true\r\n    });\r\n    this.getIssues(prevProps);\r\n  }\r\n\r\n  setForm = sidebarState => {\r\n    const { token, username } = sidebarState;\r\n    this.setState({ token, username, error: false });\r\n    setTimeout(() => this.getIssues(), 0);\r\n  };\r\n\r\n  render() {\r\n    const { isLoaded, items } = this.state;\r\n    return (\r\n      <WrapperStyles>\r\n        <Sidebar getForm={this.setForm} />\r\n        {isLoaded ? (\r\n          <DragDropContext onDragEnd={this.onDragEnd}>\r\n            <Droppable droppableId=\"droppable\">\r\n              {provided => (\r\n                <div {...provided.droppableProps} ref={provided.innerRef}>\r\n                  {items &&\r\n                    items.map((issue, index) => (\r\n                      <Draggable key={issue.id} draggableId={issue.id} index={index}>\r\n                        {(provided, snapshot) => (\r\n                          <div\r\n                            ref={provided.innerRef}\r\n                            {...provided.draggableProps}\r\n                            {...provided.dragHandleProps}\r\n                            style={getItemStyle(snapshot.isDragging, provided.draggableProps.style)}\r\n                          >\r\n                            <Issue issue={issue} />\r\n                          </div>\r\n                        )}\r\n                      </Draggable>\r\n                    ))}\r\n                  {provided.placeholder}\r\n                </div>\r\n              )}\r\n            </Droppable>\r\n          </DragDropContext>\r\n        ) : (\r\n          'Please submit Username and API Key to sort Issues'\r\n        )}\r\n      </WrapperStyles>\r\n    );\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AACA;AASA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AADA;AADA;AAKA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAeA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;AAnBA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAGA;AACA;;;AAQA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AADA;AAIA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPA;AAFA;AAHA;AA2BA;;;;AA5FA;AACA;;;;;A","sourceRoot":""}